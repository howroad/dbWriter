<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="TEMP.CommonDaoImpl">

    <!-- 新增事务申请 -->
    <insert id="saveAffair" parameterClass="com.nstc.temp.model.Affair">
        <selectKey resultClass="java.lang.Integer" keyProperty="id">
            SELECT SEQ_TPS_AFFAIR.NEXTVAL AS id FROM DUAL
        </selectKey>
        INSERT INTO TPS_AFFAIR (
            ID,
            AFFAIR_CODE,
            CLTNO,
            ACT_DATE,
            DESCRIPTION,
            UPFILENAME,
            STATUS,
            APPROVE_PERSON,
            APPROVE_TIME,
            APPROVE_OPINION,
            BIZCASEID,
            CREATE_PERSON,
            CREATE_TIME,
            UPDATE_PERSON,
            UPDATE_TIME
        ) VALUES(
            #id#,
            #affairCode#,
            #cltno#,
            #actDate#,
            #description#,
            #upfilename#,
            #status#,
            #approvePerson#,
            #approveTime#,
            #approveOpinion#,
            #bizcaseid#,
            #createPerson#,
            #createTime#,
            #updatePerson#,
            #updateTime#
        )
    </insert>

    <!-- 删除事务申请 -->
    <delete id="deleteAffairById" parameterClass="java.lang.Integer">
        delete TPS_AFFAIR WHERE ID = #id#
    </delete>

    <!-- 修改事务申请 -->
    <update id="updateAffair" parameterClass="com.nstc.temp.model.Affair">
        UPDATE TPS_AFFAIR SET
        ID = #id#
        <isNotEmpty prepend="," property="affairCode">
            AFFAIR_CODE = #affairCode#
        </isNotEmpty>
        <isNotEmpty prepend="," property="cltno">
            CLTNO = #cltno#
        </isNotEmpty>
        <isNotEmpty prepend="," property="actDate">
            ACT_DATE = #actDate#
        </isNotEmpty>
        <isNotEmpty prepend="," property="description">
            DESCRIPTION = #description#
        </isNotEmpty>
        <isNotEmpty prepend="," property="upfilename">
            UPFILENAME = #upfilename#
        </isNotEmpty>
        <isNotEmpty prepend="," property="status">
            STATUS = #status#
        </isNotEmpty>
        <isNotEmpty prepend="," property="approvePerson">
            APPROVE_PERSON = #approvePerson#
        </isNotEmpty>
        <isNotEmpty prepend="," property="approveTime">
            APPROVE_TIME = #approveTime#
        </isNotEmpty>
        <isNotEmpty prepend="," property="approveOpinion">
            APPROVE_OPINION = #approveOpinion#
        </isNotEmpty>
        <isNotEmpty prepend="," property="bizcaseid">
            BIZCASEID = #bizcaseid#
        </isNotEmpty>
        <isNotEmpty prepend="," property="createPerson">
            CREATE_PERSON = #createPerson#
        </isNotEmpty>
        <isNotEmpty prepend="," property="createTime">
            CREATE_TIME = #createTime#
        </isNotEmpty>
        <isNotEmpty prepend="," property="updatePerson">
            UPDATE_PERSON = #updatePerson#
        </isNotEmpty>
        <isNotEmpty prepend="," property="updateTime">
            UPDATE_TIME = #updateTime#
        </isNotEmpty>
        WHERE ID = #id#
    </update>

    <!-- 查询事务申请 -->
    <select id="getAffairList" parameterClass="com.nstc.temp.model.Affair" resultClass="com.nstc.temp.model.Affair">
        SELECT
            T.ID AS "id",
            T.AFFAIR_CODE AS "affairCode",
            T.CLTNO AS "cltno",
            T.ACT_DATE AS "actDate",
            T.DESCRIPTION AS "description",
            T.UPFILENAME AS "upfilename",
            T.STATUS AS "status",
            T.APPROVE_PERSON AS "approvePerson",
            T.APPROVE_TIME AS "approveTime",
            T.APPROVE_OPINION AS "approveOpinion",
            T.BIZCASEID AS "bizcaseid",
            T.CREATE_PERSON AS "createPerson",
            T.CREATE_TIME AS "createTime",
            T.UPDATE_PERSON AS "updatePerson",
            T.UPDATE_TIME AS "updateTime"
        FROM TPS_AFFAIR T WHERE 1 = 1
        <isNotEmpty property="id" prepend="and">
            T.ID = #id#
        </isNotEmpty>
        <isNotEmpty property="affairCode" prepend="and">
            T.AFFAIR_CODE = #affairCode#
        </isNotEmpty>
        <isNotEmpty property="cltno" prepend="and">
            T.CLTNO = #cltno#
        </isNotEmpty>
        <isNotEmpty property="actDate" prepend="and">
            T.ACT_DATE = #actDate#
        </isNotEmpty>
        <isNotEmpty property="description" prepend="and">
            T.DESCRIPTION = #description#
        </isNotEmpty>
        <isNotEmpty property="upfilename" prepend="and">
            T.UPFILENAME = #upfilename#
        </isNotEmpty>
        <isNotEmpty property="status" prepend="and">
            T.STATUS = #status#
        </isNotEmpty>
        <isNotEmpty property="approvePerson" prepend="and">
            T.APPROVE_PERSON = #approvePerson#
        </isNotEmpty>
        <isNotEmpty property="approveTime" prepend="and">
            T.APPROVE_TIME = #approveTime#
        </isNotEmpty>
        <isNotEmpty property="approveOpinion" prepend="and">
            T.APPROVE_OPINION = #approveOpinion#
        </isNotEmpty>
        <isNotEmpty property="bizcaseid" prepend="and">
            T.BIZCASEID = #bizcaseid#
        </isNotEmpty>
        <isNotEmpty property="createPerson" prepend="and">
            T.CREATE_PERSON = #createPerson#
        </isNotEmpty>
        <isNotEmpty property="createTime" prepend="and">
            T.CREATE_TIME = #createTime#
        </isNotEmpty>
        <isNotEmpty property="updatePerson" prepend="and">
            T.UPDATE_PERSON = #updatePerson#
        </isNotEmpty>
        <isNotEmpty property="updateTime" prepend="and">
            T.UPDATE_TIME = #updateTime#
        </isNotEmpty>
    </select>
    
    <!-- 新增测试教师表 -->
    <insert id="saveTeacher" parameterClass="com.nstc.temp.model.Teacher">
        <selectKey resultClass="java.lang.Integer" keyProperty="teacherId">
            SELECT SEQ_TEST_TEACHER.NEXTVAL AS teacherId FROM DUAL
        </selectKey>
        INSERT INTO TEST_TEACHER (
            TEACHER_ID,
            TEACHER_NAME,
            TEACHER_AGE,
            TEACHER_BIRTH
        ) VALUES(
            #teacherId#,
            #teacherName#,
            #teacherAge#,
            #teacherBirth#
        )
    </insert>

    <!-- 删除测试教师表 -->
    <delete id="deleteTeacherById" parameterClass="java.lang.Integer">
        delete TEST_TEACHER WHERE TEACHER_ID = #teacherId#
    </delete>

    <!-- 修改测试教师表 -->
    <update id="updateTeacher" parameterClass="com.nstc.temp.model.Teacher">
        UPDATE TEST_TEACHER SET
        TEACHER_ID = #teacherId#
        <isNotEmpty prepend="," property="teacherName">
            TEACHER_NAME = #teacherName#
        </isNotEmpty>
        <isNotEmpty prepend="," property="teacherAge">
            TEACHER_AGE = #teacherAge#
        </isNotEmpty>
        <isNotEmpty prepend="," property="teacherBirth">
            TEACHER_BIRTH = #teacherBirth#
        </isNotEmpty>
        WHERE TEACHER_ID = #teacherId#
    </update>

    <!-- 查询测试教师表 -->
    <select id="getTeacherList" parameterClass="com.nstc.temp.model.Teacher" resultClass="com.nstc.temp.model.Teacher">
        SELECT
            T.TEACHER_ID AS "teacherId",
            T.TEACHER_NAME AS "teacherName",
            T.TEACHER_AGE AS "teacherAge",
            T.TEACHER_BIRTH AS "teacherBirth"
        FROM TEST_TEACHER T WHERE 1 = 1
        <isNotEmpty property="teacherId" prepend="and">
            T.TEACHER_ID = #teacherId#
        </isNotEmpty>
        <isNotEmpty property="teacherName" prepend="and">
            T.TEACHER_NAME = #teacherName#
        </isNotEmpty>
        <isNotEmpty property="teacherAge" prepend="and">
            T.TEACHER_AGE = #teacherAge#
        </isNotEmpty>
        <isNotEmpty property="teacherBirth" prepend="and">
            T.TEACHER_BIRTH = #teacherBirth#
        </isNotEmpty>
    </select>
</sqlMap>
