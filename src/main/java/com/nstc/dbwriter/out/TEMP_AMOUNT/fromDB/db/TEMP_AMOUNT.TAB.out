DECLARE
    CNT INTEGER;
BEGIN
    SELECT COUNT(0) INTO CNT FROM USER_ALL_TABLES
    WHERE TABLE_NAME = UPPER('TEMP_AMOUNT');
    IF CNT = 0 THEN
    EXECUTE IMMEDIATE 'CREATE TABLE TEMP_AMOUNT(
        AMOUNT_ID NUMBER,
        AMOUNT_NAME VARCHAR2(32),
        AMOUNT_BALENCE NUMBER(10,6),
        UPDATE_TIME DATE,
        CREATE_PERSON VARCHAR2(32),
        LOCKED NUMBER
        )';
    END IF;
END;
/

COMMENT ON TABLE TEMP_AMOUNT IS '账户表';
/

COMMENT ON COLUMN TEMP_AMOUNT.AMOUNT_ID IS '主键';
/
COMMENT ON COLUMN TEMP_AMOUNT.AMOUNT_NAME IS '账户名称';
/
COMMENT ON COLUMN TEMP_AMOUNT.AMOUNT_BALENCE IS '账户余额';
/
COMMENT ON COLUMN TEMP_AMOUNT.UPDATE_TIME IS '修改日期';
/
COMMENT ON COLUMN TEMP_AMOUNT.CREATE_PERSON IS '创建者';
/
COMMENT ON COLUMN TEMP_AMOUNT.LOCKED IS '是否锁定';
/

DECLARE
    CNT INTEGER;
BEGIN
    SELECT COUNT(0) INTO CNT FROM USER_CONSTRAINTS
    WHERE CONSTRAINT_NAME = UPPER('TEMP_AMOUNT_PK');
    IF CNT = 0 THEN
    EXECUTE IMMEDIATE 'ALTER TABLE TEMP_AMOUNT ADD CONSTRAINT TEMP_AMOUNT_PK PRIMARY KEY(AMOUNT_ID)';
    END IF;
END;
/
