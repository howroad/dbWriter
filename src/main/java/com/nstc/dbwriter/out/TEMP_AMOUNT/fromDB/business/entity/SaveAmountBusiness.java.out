package com.nstc.temp.business;

/**
 * 保存/提交账户表
 * 
 * <p>Title: SaveAmountBusiness.java</p>
 *
 * <p>Description: 保存/提交账户表</p>
 *
 * <p>Company: 北京九恒星科技股份有限公司</p>
 *
 * @author luhao
 * 
 * @since：2019-02-22 10:50:49
 * 
 */
public class SaveAmountBusiness extends AbstractTEMPBusiness{
    
    private Map<String, Object> temp_amount_form;
    
    public void doExecute() {
        if (temp_amount_form != null) {
            Amount model = (Amount) BeanHelper.populate(Amount.class, temp_amount_form);
            Integer saveFlag = CastUtil.toInteger(temp_amount_form.get(SAVE_FLAG));
            if (SAVE == saveFlag) {
                // 保存
                getLocator().getAmountService().saveOrUpdateAmount(model);
                setInfoMsg(SAVE_SUCCESS_MSG);
            } else if (SUBMIT == saveFlag) {
                // 保存并发起工作流
                getLocator().getAffairService().saveOrUpdateAndSubmitAmount(model);
                setInfoMsg(SUBMIT_SUCCESS_MSG);
            }
            //TODO 页面上的其他数据
        }
    }

}
